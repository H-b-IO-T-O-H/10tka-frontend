{"ast":null,"code":"var _jsxFileName = \"/home/vlad/10tka/10tka-frontend/src/pages/UsersControl/UsersControl.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from \"react\";\nimport \"./UsersControl.scss\";\nimport InputNumber from \"@components/InputNumber\";\nimport Tags from \"@components/Tags\";\nimport StatusLabel from \"@components/StatusLabel\";\nimport { btnPasswd, checkRussian, ERROR_ABOUT_FIELD, ERROR_NAME_FIELD, ERROR_PATRONYMIC_FIELD, ERROR_PHONE_FIELD, ERROR_SURNAME_FIELD, isValid, MAX_ABOUT, MAX_SNP, MIN_SNP, notEmpty } from \"./config\";\nimport { makeGet, makePost, makePut } from \"@utils/network\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faRedoAlt } from \"@fortawesome/free-solid-svg-icons/faRedoAlt\";\nimport UsersTable from \"./usersTables\";\nimport { Urls } from \"@config/urls\";\nimport AuthError from \"@components/AuthError/AuthError\";\nimport { ERROR_EMAIL_FIELD, USER_TYPE_METHODIST, USER_TYPE_PROFESSOR, USER_TYPE_STUDENT } from \"../Authorization/config\";\nimport { v4 as uuid } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InitialUser = {\n  id: \"\",\n  role: USER_TYPE_STUDENT,\n  email: \"\",\n  phone: \"\",\n  name: \"\",\n  surname: \"\",\n  patronymic: \"\",\n  password: \"\",\n  about: \"\",\n  disciplines: [],\n  group: NaN,\n  sem: NaN\n};\n\nconst UsersControl = () => {\n  _s();\n\n  const [label, showLabel] = useState({\n    content: \"\",\n    success: false\n  });\n  const [inputPasswd, setInputPasswd] = useState(null);\n  const [userInfo, setUserInfo] = useState(InitialUser);\n  const [timer, setTimer] = useState(0);\n  const [disciplines, setDisciplines] = useState([]);\n  const [isDataForEdit, changeEditFlag] = useState({\n    wasEdit: false,\n    oldPhone: \"\",\n    oldEmail: \"\"\n  });\n  const [btnText, setBtnText] = useState(\"Сохранить\");\n  const [userValid, setUserValid] = useState({\n    role: {\n      noFocus: false,\n      msg: \"\"\n    },\n    email: {\n      noFocus: false,\n      msg: \"\"\n    },\n    phone: {\n      noFocus: false,\n      msg: \"\"\n    },\n    name: {\n      noFocus: false,\n      msg: \"\"\n    },\n    surname: {\n      noFocus: false,\n      msg: \"\"\n    },\n    patronymic: {\n      noFocus: false,\n      msg: \"\"\n    },\n    password: {\n      noFocus: false,\n      msg: \"\"\n    },\n    about: {\n      noFocus: false,\n      msg: \"\"\n    }\n  });\n  React.useEffect(() => {\n    const inputElem = document.getElementById(\"input-password\");\n    setInputPasswd(inputElem);\n\n    if (userInfo.role === USER_TYPE_PROFESSOR) {\n      makeGet(Urls.discipline.getAll()).then(resp => {\n        if (resp.status === 200) {\n          if (resp.data && resp.data.disciplines && resp.data.disciplines.length > 0) {\n            setDisciplines(resp.data.disciplines);\n          }\n        }\n      }).catch(err => {\n        showLabel({\n          content: \"Не удалось загрузить список дисциплин.\",\n          success: false\n        });\n      });\n    }\n  }, [userInfo.role]);\n  const handleSubmit = useCallback(() => {\n    let fieldsCanBeEmpty = [\"about\", \"sem\", \"group\"];\n\n    if (!isValid(userValid)) {\n      showLabel({\n        content: \"Заполните поля корректно.\",\n        success: false\n      });\n      return;\n    }\n\n    if (userInfo.role === USER_TYPE_METHODIST) {\n      fieldsCanBeEmpty.push(\"disciplines\");\n    } else if (userInfo.role === USER_TYPE_STUDENT) {\n      fieldsCanBeEmpty = [\"about\", \"disciplines\"];\n    }\n\n    if (isDataForEdit.wasEdit) {\n      fieldsCanBeEmpty.push(\"password\");\n    } else {\n      fieldsCanBeEmpty.push(\"id\");\n    }\n\n    console.log(userInfo);\n\n    if (!notEmpty(userInfo, fieldsCanBeEmpty)) {\n      showLabel({\n        content: \"Заполните пустые поля.\",\n        success: false\n      });\n      return;\n    }\n\n    const newUser = {\n      id: userInfo.id,\n      role: userInfo.role.trim(),\n      password: userInfo.password,\n      name: userInfo.name.trim(),\n      surname: userInfo.surname.trim(),\n      patronymic: userInfo.patronymic.trim(),\n      email: userInfo.email.trim(),\n      phone: userInfo.phone.trim(),\n      student_group: userInfo.role === USER_TYPE_STUDENT ? `${userInfo.sem}${userInfo.group}` : \"\",\n      prof_disciplines: userInfo.disciplines.map(dis => dis.content)\n    };\n    console.log(userInfo.id);\n\n    if (isDataForEdit.wasEdit) {\n      makePut(Urls.user.postCreate(), newUser).then(resp => {\n        if (resp.status === 201) {\n          showLabel({\n            content: \"Успех!\",\n            success: true\n          });\n          setUserInfo(InitialUser);\n          changeEditFlag({\n            wasEdit: false,\n            oldEmail: \"\",\n            oldPhone: \"\"\n          });\n          setBtnText(\"Сохранить\");\n        }\n      }).catch(err => {\n        if (err && err.response && err.response.status === 409) {\n          showLabel({\n            content: \"Пользователь с данным email или телефоном уже зарегистрирован.\",\n            success: false\n          });\n        } else {\n          showLabel({\n            content: \"Ошибка сервера. Попробуйте позже.\",\n            success: false\n          });\n        }\n      });\n    } else {\n      makePost(Urls.user.postCreate(), newUser).then(resp => {\n        if (resp.status === 201) {\n          showLabel({\n            content: \"Успех!\",\n            success: true\n          });\n          setUserInfo(InitialUser);\n          changeEditFlag({\n            wasEdit: false,\n            oldEmail: \"\",\n            oldPhone: \"\"\n          });\n          setBtnText(\"Сохранить\");\n        }\n      }).catch(err => {\n        if (err && err.response && err.response.status === 409) {\n          showLabel({\n            content: \"Пользователь с данным email или телефоном уже зарегистрирован.\",\n            success: false\n          });\n        } else {\n          showLabel({\n            content: \"Ошибка сервера. Попробуйте позже.\",\n            success: false\n          });\n        }\n      });\n    }\n  }, [userValid, userInfo, isDataForEdit]);\n  const handlePassword = useCallback(() => {\n    const oldUser = { ...userInfo\n    };\n\n    if (inputPasswd) {\n      if (timer !== 0) {\n        clearTimeout(timer);\n      }\n\n      setTimer(window.setTimeout(() => {\n        inputPasswd.type = \"password\";\n        clearTimeout(timer);\n      }, 2000));\n      inputPasswd.type = \"text\";\n    }\n\n    oldUser.password = btnPasswd.genPasswd(15);\n    setUserInfo(oldUser);\n  }, [inputPasswd, timer, userInfo]);\n  const handleBlur = useCallback(() => {\n    const oldUserValid = { ...userValid\n    };\n    Object.keys(oldUserValid).forEach(key => {\n      oldUserValid[key].noFocus = true;\n\n      if (userInfo[key] === \"\") {\n        oldUserValid[key].msg = \"\";\n      }\n    });\n    setUserValid(oldUserValid);\n  }, [userInfo, userValid]);\n  const handleUserInfo = useCallback(e => {\n    const oldUser = { ...userInfo\n    };\n    const oldUserValid = { ...userValid\n    };\n    const value = e.target.value;\n    const length = value.length;\n\n    if (isDataForEdit.wasEdit) {\n      setBtnText(\"Редактировать\");\n    } else {\n      setBtnText(\"Сохранить\");\n    }\n\n    switch (e.target.id) {\n      case \"input-name\":\n        oldUserValid.name.msg = length < MIN_SNP || length >= MAX_SNP || !checkRussian(value) ? ERROR_NAME_FIELD : \"\";\n        oldUserValid.name.noFocus = false;\n        oldUser.name = value;\n        break;\n\n      case \"input-surname\":\n        oldUserValid.surname.msg = length < MIN_SNP || length >= MAX_SNP || !checkRussian(value) ? ERROR_SURNAME_FIELD : \"\";\n        oldUserValid.surname.noFocus = false;\n        oldUser.surname = value;\n        break;\n\n      case \"input-patronymic\":\n        oldUserValid.patronymic.msg = length < MIN_SNP || length >= MAX_SNP || !checkRussian(value) ? ERROR_PATRONYMIC_FIELD : \"\";\n        oldUserValid.patronymic.noFocus = false;\n        oldUser.patronymic = value;\n        break;\n\n      case \"input-password\":\n        oldUserValid.patronymic.msg = length < MIN_SNP || length >= MAX_SNP ? ERROR_PATRONYMIC_FIELD : \"\";\n        oldUserValid.patronymic.noFocus = false;\n        oldUser.password = value;\n        break;\n\n      case \"select-usertype\":\n        oldUser.role = value;\n        break;\n\n      case \"input-email\":\n        const reEmail = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        oldUserValid.email.msg = !reEmail.test(String(value).toLowerCase()) ? ERROR_EMAIL_FIELD : \"\";\n        oldUserValid.email.noFocus = false;\n        oldUser.email = value;\n\n        if (value === isDataForEdit.oldEmail) {\n          setBtnText(\"Редактировать\");\n        } else {\n          changeEditFlag({\n            wasEdit: false,\n            oldEmail: oldUser.email,\n            oldPhone: isDataForEdit.oldPhone\n          });\n          setBtnText(\"Сохранить\");\n        }\n\n        break;\n\n      case \"input-phone\":\n        const rePhone = /^[\\d]{1} \\([\\d]{2,3}\\) [\\d]{2,3}-[\\d]{2,3}-[\\d]{2,3}$/;\n        oldUserValid.phone.msg = !rePhone.test(String(value).toLowerCase()) ? ERROR_PHONE_FIELD : \"\";\n        oldUserValid.phone.noFocus = false;\n        let telephone = \"\";\n        let numbersOld = oldUser.phone.replace(/\\D/g, \"\").split('');\n        const numbersNew = value.replace(/\\D/g, \"\").split('');\n\n        if (numbersOld.length === numbersNew.length && telephone.length < value.length) {\n          telephone = value;\n        } else {\n          for (let i = 0; i < 11 && i < numbersNew.length; ++i) {\n            if (i === 4) {\n              telephone += \") \";\n            } else if (i === 7 || i === 9) {\n              telephone += \"-\";\n            }\n\n            telephone += numbersNew[i];\n\n            if (i === 0) {\n              telephone += \" (\";\n            }\n          }\n        }\n\n        oldUser.phone = telephone.trim();\n\n        if (oldUser.phone === isDataForEdit.oldPhone) {\n          setBtnText(\"Редактировать\");\n        } else {\n          changeEditFlag({\n            wasEdit: false,\n            oldEmail: isDataForEdit.oldEmail,\n            oldPhone: oldUser.phone\n          });\n          setBtnText(\"Сохранить\");\n        }\n\n        break;\n\n      case \"input-about\":\n        oldUserValid.about.msg = length > MAX_ABOUT ? ERROR_ABOUT_FIELD + ` (${length})` : \"\";\n        oldUserValid.about.noFocus = false;\n        oldUser.about = value;\n        break;\n    }\n\n    setUserInfo(oldUser);\n    setUserValid(oldUserValid);\n  }, [isDataForEdit, userInfo, userValid]);\n  const handleInputId = useCallback((id, value) => {\n    const oldUser = { ...userInfo\n    };\n\n    if (id === \"input_nmb_sem\") {\n      oldUser.sem = value;\n    } else {\n      oldUser.group = value;\n    }\n\n    setUserInfo(oldUser);\n  }, [userInfo]);\n  const handleUserEdit = React.useCallback(user => {\n    let sem = NaN;\n    let group = NaN; //console.log(user.student_group)\n\n    if (user.student_group.length === 3) {\n      sem = user.student_group.slice(0, 2);\n      group = user.student_group[2];\n    } else if (user.student_group.length === 2) {\n      sem = user.student_group[0];\n      group = user.student_group[1];\n    }\n\n    const prepareUser = {\n      id: user.id,\n      role: user.role,\n      email: user.email,\n      phone: user.phone,\n      name: user.name,\n      surname: user.surname,\n      patronymic: user.patronymic,\n      password: \"\",\n      about: user.about,\n      disciplines: user.prof_disciplines_str.substring(1, user.prof_disciplines_str.length - 1).split(\",\").map(d => ({\n        id: `tag-${uuid()}`,\n        content: d\n      })),\n      group: group,\n      sem: sem\n    };\n    changeEditFlag({\n      wasEdit: true,\n      oldEmail: user.email,\n      oldPhone: user.phone\n    });\n    setBtnText(\"Редактировать\");\n    setUserInfo(prepareUser);\n  }, []);\n\n  const defineRole = () => {\n    if (userInfo.role === USER_TYPE_STUDENT) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mr-1\",\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              placeholder: \"Сем\",\n              onChange: handleInputId,\n              id: \"input_nmb_sem\",\n              min: 1,\n              max: 12,\n              defaultValue: userInfo.sem\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-1\",\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              placeholder: \"Группа\",\n              onChange: handleInputId,\n              id: \"input_nmb_group\",\n              min: 1,\n              max: 5,\n              defaultValue: userInfo.group\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }, this), !isNaN(userInfo.sem) && !isNaN(userInfo.group) ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"IU\",\n          children: `Группа: ИУ10-${userInfo.sem}${userInfo.group}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 25\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 17\n      }, this);\n    } else if (userInfo.role === USER_TYPE_PROFESSOR) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"users-control_label\",\n          children: \"\\u0414\\u0438\\u0441\\u0446\\u0438\\u043F\\u043B\\u0438\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Tags, {\n          tags: userInfo.disciplines,\n          selectList: disciplines.map(d => d.discipline_content),\n          changeTags: newTags => {\n            const oldInfo = { ...userInfo\n            };\n            oldInfo.disciplines = newTags;\n            setUserInfo(oldInfo);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 21\n        }, this), userValid.about.noFocus && userValid.about.msg && /*#__PURE__*/_jsxDEV(AuthError, {\n          msg: userValid.about.msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"prof-info mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"users-control_label\",\n            children: \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"input-about\",\n            className: \"users-control_input\",\n            onChange: handleUserInfo,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(StatusLabel, {\n      info: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__header\",\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"users-control_block\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1\",\n            children: [userValid.surname.noFocus && userValid.surname.msg && /*#__PURE__*/_jsxDEV(AuthError, {\n              msg: userValid.surname.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"input-surname\",\n              className: \"users-control_input\",\n              value: userInfo.surname,\n              onChange: handleUserInfo,\n              onBlur: handleBlur\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1\",\n            children: [userValid.name.noFocus && userValid.name.msg && /*#__PURE__*/_jsxDEV(AuthError, {\n              msg: userValid.name.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"\\u0418\\u043C\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"input-name\",\n              className: \"users-control_input\",\n              value: userInfo.name,\n              onChange: handleUserInfo,\n              onBlur: handleBlur\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1\",\n            children: [userValid.patronymic.noFocus && userValid.patronymic.msg && /*#__PURE__*/_jsxDEV(AuthError, {\n              msg: userValid.patronymic.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"input-patronymic\",\n              className: \"users-control_input\",\n              value: userInfo.patronymic,\n              onChange: handleUserInfo,\n              onBlur: handleBlur\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1\",\n            children: [userValid.phone.noFocus && userValid.phone.msg && /*#__PURE__*/_jsxDEV(AuthError, {\n              msg: userValid.phone.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"users-control_advice\",\n              children: \"\\u0424\\u043E\\u0440\\u043C\\u0430\\u0442: 8 (888) 888-88-88\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"input-phone\",\n              className: \"users-control_input\",\n              value: userInfo.phone,\n              onChange: handleUserInfo,\n              onBlur: handleBlur\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1\",\n            children: [userValid.email.noFocus && userValid.email.msg && /*#__PURE__*/_jsxDEV(AuthError, {\n              msg: userValid.email.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"input-email\",\n              className: \"users-control_input\",\n              value: userInfo.email,\n              onChange: handleUserInfo,\n              onBlur: handleBlur\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"users-control_advice\",\n              children: \"\\u041D\\u0435 \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F, \\u0435\\u0441\\u043B\\u0438 \\u043D\\u0435\\u0442 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438 \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u044F\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u044E\\u0449\\u0435\\u0433\\u043E \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-row align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"input-password\",\n                className: \"users-control_input\",\n                value: userInfo.password,\n                onChange: handleUserInfo,\n                disabled: true,\n                onBlur: handleBlur\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handlePassword,\n                className: \"tag-btn ml-1\",\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  className: \"icon-reload\",\n                  icon: faRedoAlt,\n                  size: \"sm\",\n                  color: \"#ffffff\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 66\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-control_label\",\n              children: \"\\u0422\\u0438\\u043F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"select-usertype\",\n              className: \"users-control_select\",\n              value: userInfo.role,\n              onChange: handleUserInfo,\n              onBlur: handleBlur,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: USER_TYPE_STUDENT,\n                children: \"\\u0421\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: USER_TYPE_PROFESSOR,\n                children: \"\\u041F\\u0440\\u0435\\u043F\\u043E\\u0434\\u0430\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: USER_TYPE_METHODIST,\n                children: \"\\u041C\\u0435\\u0442\\u043E\\u0434\\u0438\\u0441\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 25\n          }, this), defineRole(), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn users-control_load mt-3 mb-3\",\n            onClick: handleSubmit,\n            children: btnText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UsersTable, {\n        id: 1,\n        url: Urls.user.getProfessorsAll(),\n        userType: USER_TYPE_PROFESSOR,\n        title: \"Список преподавателей\",\n        rowClickEvent: handleUserEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UsersTable, {\n        id: 2,\n        url: Urls.user.getStudentsAll(),\n        userType: USER_TYPE_STUDENT,\n        title: \"Список студентов\",\n        rowClickEvent: handleUserEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 385,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UsersControl, \"3ZmLmufllYfAy2W8puby9ji7sxc=\");\n\n_c = UsersControl;\nexport default UsersControl;\n\nvar _c;\n\n$RefreshReg$(_c, \"UsersControl\");","map":{"version":3,"sources":["/home/vlad/10tka/10tka-frontend/src/pages/UsersControl/UsersControl.tsx"],"names":["React","useCallback","useState","InputNumber","Tags","StatusLabel","btnPasswd","checkRussian","ERROR_ABOUT_FIELD","ERROR_NAME_FIELD","ERROR_PATRONYMIC_FIELD","ERROR_PHONE_FIELD","ERROR_SURNAME_FIELD","isValid","MAX_ABOUT","MAX_SNP","MIN_SNP","notEmpty","makeGet","makePost","makePut","FontAwesomeIcon","faRedoAlt","UsersTable","Urls","AuthError","ERROR_EMAIL_FIELD","USER_TYPE_METHODIST","USER_TYPE_PROFESSOR","USER_TYPE_STUDENT","v4","uuid","InitialUser","id","role","email","phone","name","surname","patronymic","password","about","disciplines","group","NaN","sem","UsersControl","label","showLabel","content","success","inputPasswd","setInputPasswd","userInfo","setUserInfo","timer","setTimer","setDisciplines","isDataForEdit","changeEditFlag","wasEdit","oldPhone","oldEmail","btnText","setBtnText","userValid","setUserValid","noFocus","msg","useEffect","inputElem","document","getElementById","discipline","getAll","then","resp","status","data","length","catch","err","handleSubmit","fieldsCanBeEmpty","push","console","log","newUser","trim","student_group","prof_disciplines","map","dis","user","postCreate","response","handlePassword","oldUser","clearTimeout","window","setTimeout","type","genPasswd","handleBlur","oldUserValid","Object","keys","forEach","key","handleUserInfo","e","value","target","reEmail","test","String","toLowerCase","rePhone","telephone","numbersOld","replace","split","numbersNew","i","handleInputId","handleUserEdit","slice","prepareUser","prof_disciplines_str","substring","d","defineRole","isNaN","discipline_content","newTags","oldInfo","getProfessorsAll","getStudentsAll"],"mappings":"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","sourcesContent":["import React, {useCallback, useState} from \"react\";\nimport \"./UsersControl.scss\"\nimport InputNumber from \"@components/InputNumber\";\nimport Tags from \"@components/Tags\";\nimport StatusLabel from \"@components/StatusLabel\";\nimport {\n    btnPasswd, checkRussian, ERROR_ABOUT_FIELD,\n    ERROR_NAME_FIELD,\n    ERROR_PATRONYMIC_FIELD, ERROR_PHONE_FIELD,\n    ERROR_SURNAME_FIELD, isValid, MAX_ABOUT,\n    MAX_SNP,\n    MIN_SNP, notEmpty,\n} from \"./config\";\n\nimport {makeGet, makePost, makePut} from \"@utils/network\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faRedoAlt} from \"@fortawesome/free-solid-svg-icons/faRedoAlt\";\nimport UsersTable from \"./usersTables\";\nimport {Urls} from \"@config/urls\";\nimport AuthError from \"@components/AuthError/AuthError\";\nimport {ERROR_EMAIL_FIELD, USER_TYPE_METHODIST, USER_TYPE_PROFESSOR, USER_TYPE_STUDENT} from \"../Authorization/config\";\nimport {v4 as uuid} from \"uuid\";\n\ntype UserProps = {\n    id: string,\n    role: string,\n    email: string,\n    phone: string,\n    name: string,\n    surname: string,\n    patronymic: string,\n    password: string,\n    about: string,\n    disciplines: Array<{ id: string, content: string }>,\n    group: number,\n    sem: number\n}\n\nconst InitialUser = {\n    id: \"\",\n    role: USER_TYPE_STUDENT,\n    email: \"\",\n    phone: \"\",\n    name: \"\",\n    surname: \"\",\n    patronymic: \"\",\n    password: \"\",\n    about: \"\",\n    disciplines: [],\n    group: NaN,\n    sem: NaN\n};\n\nconst UsersControl = () => {\n    const [label, showLabel] = useState({content: \"\", success: false});\n    const [inputPasswd, setInputPasswd] = useState<HTMLInputElement | null>(null);\n    const [userInfo, setUserInfo] = useState<UserProps>(InitialUser);\n    const [timer, setTimer] = useState(0);\n    const [disciplines, setDisciplines] = useState<Array<{ discipline_id: number, discipline_content: string, prof_cnt: number }>>([]);\n    const [isDataForEdit, changeEditFlag] = useState({wasEdit: false, oldPhone: \"\", oldEmail: \"\"});\n    const [btnText, setBtnText] = useState(\"Сохранить\")\n\n    const [userValid, setUserValid] = useState({\n        role: {noFocus: false, msg: \"\"},\n        email: {noFocus: false, msg: \"\"},\n        phone: {noFocus: false, msg: \"\"},\n        name: {noFocus: false, msg: \"\"},\n        surname: {noFocus: false, msg: \"\"},\n        patronymic: {noFocus: false, msg: \"\"},\n        password: {noFocus: false, msg: \"\"},\n        about: {noFocus: false, msg: \"\"},\n    });\n\n    React.useEffect(() => {\n        const inputElem = document.getElementById(\"input-password\") as HTMLInputElement;\n\n        setInputPasswd(inputElem);\n        if (userInfo.role === USER_TYPE_PROFESSOR) {\n            makeGet(Urls.discipline.getAll()).then((resp) => {\n                if (resp.status === 200) {\n                    if (resp.data && resp.data.disciplines && resp.data.disciplines.length > 0) {\n                        setDisciplines(resp.data.disciplines)\n                    }\n                }\n            }).catch((err) => {\n                showLabel({content: \"Не удалось загрузить список дисциплин.\", success: false})\n            })\n        }\n    }, [userInfo.role])\n\n    const handleSubmit = useCallback(() => {\n        let fieldsCanBeEmpty = [\"about\", \"sem\", \"group\"];\n\n        if (!isValid(userValid)) {\n            showLabel({content: \"Заполните поля корректно.\", success: false});\n            return;\n        }\n\n        if (userInfo.role === USER_TYPE_METHODIST) {\n            fieldsCanBeEmpty.push(\"disciplines\");\n        } else if (userInfo.role === USER_TYPE_STUDENT) {\n            fieldsCanBeEmpty = [\"about\", \"disciplines\"];\n        }\n\n        if (isDataForEdit.wasEdit) {\n            fieldsCanBeEmpty.push(\"password\");\n        } else {\n            fieldsCanBeEmpty.push(\"id\");\n        }\n\n        console.log(userInfo)\n        if (!notEmpty(userInfo, fieldsCanBeEmpty)) {\n            showLabel({content: \"Заполните пустые поля.\", success: false});\n            return;\n        }\n\n        const newUser = {\n            id: userInfo.id,\n            role: userInfo.role.trim(),\n            password: userInfo.password,\n            name: userInfo.name.trim(),\n            surname: userInfo.surname.trim(),\n            patronymic: userInfo.patronymic.trim(),\n            email: userInfo.email.trim(),\n            phone: userInfo.phone.trim(),\n            student_group: userInfo.role === USER_TYPE_STUDENT ? `${userInfo.sem}${userInfo.group}` : \"\",\n            prof_disciplines: userInfo.disciplines.map((dis) => (dis.content)),\n        }\n\n        console.log(userInfo.id)\n\n        if (isDataForEdit.wasEdit) {\n            makePut(Urls.user.postCreate(), newUser).then((resp) => {\n                if (resp.status === 201) {\n                    showLabel({content: \"Успех!\", success: true});\n                    setUserInfo(InitialUser);\n                    changeEditFlag({wasEdit: false, oldEmail: \"\", oldPhone: \"\"});\n                    setBtnText(\"Сохранить\")\n                }\n            }).catch((err) => {\n                if (err && err.response && err.response.status === 409) {\n                    showLabel({\n                        content: \"Пользователь с данным email или телефоном уже зарегистрирован.\",\n                        success: false\n                    });\n                } else {\n                    showLabel({content: \"Ошибка сервера. Попробуйте позже.\", success: false});\n                }\n            });\n        } else {\n            makePost(Urls.user.postCreate(), newUser).then((resp) => {\n                if (resp.status === 201) {\n                    showLabel({content: \"Успех!\", success: true});\n                    setUserInfo(InitialUser);\n                    changeEditFlag({wasEdit: false, oldEmail: \"\", oldPhone: \"\"});\n                    setBtnText(\"Сохранить\")\n                }\n            }).catch((err) => {\n                if (err && err.response && err.response.status === 409) {\n                    showLabel({\n                        content: \"Пользователь с данным email или телефоном уже зарегистрирован.\",\n                        success: false\n                    });\n                } else {\n                    showLabel({content: \"Ошибка сервера. Попробуйте позже.\", success: false});\n                }\n            });\n        }\n\n\n    }, [userValid, userInfo, isDataForEdit]);\n\n\n    const handlePassword = useCallback(() => {\n        const oldUser = {...userInfo};\n\n        if (inputPasswd) {\n            if (timer !== 0) {\n                clearTimeout(timer);\n            }\n            setTimer(window.setTimeout(() => {\n                inputPasswd.type = \"password\";\n                clearTimeout(timer);\n            }, 2000));\n            inputPasswd.type = \"text\";\n        }\n        oldUser.password = btnPasswd.genPasswd(15);\n        setUserInfo(oldUser);\n    }, [inputPasswd, timer, userInfo]);\n\n    const handleBlur = useCallback(() => {\n        const oldUserValid = {...userValid};\n\n        Object.keys(oldUserValid).forEach((key) => {\n            oldUserValid[key].noFocus = true;\n            if (userInfo[key] === \"\") {\n                oldUserValid[key].msg = \"\";\n            }\n        });\n\n        setUserValid(oldUserValid);\n    }, [userInfo, userValid]);\n\n\n    const handleUserInfo = useCallback((e: React.ChangeEvent<HTMLSelectElement> | React.ChangeEvent<HTMLInputElement>) => {\n        const oldUser = {...userInfo};\n        const oldUserValid = {...userValid};\n        const value = e.target.value;\n        const length = value.length;\n\n        if (isDataForEdit.wasEdit) {\n            setBtnText(\"Редактировать\");\n        } else {\n            setBtnText(\"Сохранить\");\n        }\n\n        switch (e.target.id) {\n            case \"input-name\":\n                oldUserValid.name.msg = length < MIN_SNP || length >= MAX_SNP || !checkRussian(value) ? ERROR_NAME_FIELD : \"\"\n                oldUserValid.name.noFocus = false;\n                oldUser.name = value;\n                break;\n            case \"input-surname\":\n                oldUserValid.surname.msg = length < MIN_SNP || length >= MAX_SNP || !checkRussian(value) ? ERROR_SURNAME_FIELD : \"\"\n                oldUserValid.surname.noFocus = false;\n                oldUser.surname = value;\n                break;\n            case \"input-patronymic\":\n                oldUserValid.patronymic.msg = length < MIN_SNP || length >= MAX_SNP || !checkRussian(value) ? ERROR_PATRONYMIC_FIELD : \"\"\n                oldUserValid.patronymic.noFocus = false;\n                oldUser.patronymic = value;\n                break;\n            case \"input-password\":\n                oldUserValid.patronymic.msg = length < MIN_SNP || length >= MAX_SNP ? ERROR_PATRONYMIC_FIELD : \"\"\n                oldUserValid.patronymic.noFocus = false;\n                oldUser.password = value;\n                break;\n            case \"select-usertype\":\n                oldUser.role = value;\n                break;\n            case \"input-email\":\n                const reEmail = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n                oldUserValid.email.msg = !reEmail.test(String(value).toLowerCase()) ? ERROR_EMAIL_FIELD : \"\";\n                oldUserValid.email.noFocus = false;\n                oldUser.email = value;\n                if (value === isDataForEdit.oldEmail) {\n                    setBtnText(\"Редактировать\");\n                } else {\n                    changeEditFlag({wasEdit: false, oldEmail: oldUser.email, oldPhone: isDataForEdit.oldPhone});\n                    setBtnText(\"Сохранить\");\n                }\n                break;\n            case \"input-phone\":\n                const rePhone = /^[\\d]{1} \\([\\d]{2,3}\\) [\\d]{2,3}-[\\d]{2,3}-[\\d]{2,3}$/;\n                oldUserValid.phone.msg = !rePhone.test(String(value).toLowerCase()) ? ERROR_PHONE_FIELD : \"\";\n                oldUserValid.phone.noFocus = false;\n\n                let telephone = \"\";\n                let numbersOld = oldUser.phone.replace(/\\D/g, \"\").split('');\n                const numbersNew = value.replace(/\\D/g, \"\").split('');\n\n                if (numbersOld.length === numbersNew.length && telephone.length < value.length) {\n                    telephone = value;\n                } else {\n                    for (let i = 0; i < 11 && i < numbersNew.length; ++i) {\n                        if (i === 4) {\n                            telephone += \") \";\n                        } else if (i === 7 || i === 9) {\n                            telephone += \"-\";\n                        }\n                        telephone += numbersNew[i];\n                        if (i === 0) {\n                            telephone += \" (\";\n                        }\n                    }\n                }\n\n                oldUser.phone = telephone.trim();\n                if (oldUser.phone === isDataForEdit.oldPhone) {\n                    setBtnText(\"Редактировать\");\n                } else {\n                    changeEditFlag({wasEdit: false, oldEmail: isDataForEdit.oldEmail, oldPhone: oldUser.phone});\n                    setBtnText(\"Сохранить\");\n                }\n                break;\n            case \"input-about\":\n                oldUserValid.about.msg = length > MAX_ABOUT ? ERROR_ABOUT_FIELD + ` (${length})` : \"\";\n                oldUserValid.about.noFocus = false;\n                oldUser.about = value;\n                break;\n        }\n        setUserInfo(oldUser);\n        setUserValid(oldUserValid);\n    }, [isDataForEdit, userInfo, userValid]);\n\n    const handleInputId = useCallback((id: string, value: number) => {\n        const oldUser = {...userInfo};\n\n        if (id === \"input_nmb_sem\") {\n            oldUser.sem = value;\n        } else {\n            oldUser.group = value;\n        }\n        setUserInfo(oldUser);\n    }, [userInfo]);\n\n    const handleUserEdit = React.useCallback((user: any) => {\n        let sem = NaN;\n        let group = NaN;\n        //console.log(user.student_group)\n        if (user.student_group.length === 3) {\n            sem = user.student_group.slice(0, 2);\n            group = user.student_group[2];\n        } else if (user.student_group.length === 2) {\n            sem = user.student_group[0];\n            group = user.student_group[1];\n        }\n\n        const prepareUser = {\n            id: user.id,\n            role: user.role,\n            email: user.email,\n            phone: user.phone,\n            name: user.name,\n            surname: user.surname,\n            patronymic: user.patronymic,\n            password: \"\",\n            about: user.about,\n            disciplines: user.prof_disciplines_str.substring(1, user.prof_disciplines_str.length - 1).split(\",\").map((d: string) => ({\n                id: `tag-${uuid()}`,\n                content: d\n            })),\n            group: group,\n            sem: sem\n        }\n\n        changeEditFlag({wasEdit: true, oldEmail: user.email, oldPhone: user.phone});\n        setBtnText(\"Редактировать\");\n        setUserInfo(prepareUser);\n    }, []);\n\n    const defineRole = () => {\n        if (userInfo.role === USER_TYPE_STUDENT) {\n            return (\n                <div>\n                    <div className=\"d-flex justify-content-center\">\n                        <div className=\"mr-1\">\n                            <InputNumber placeholder={\"Сем\"} onChange={handleInputId} id={\"input_nmb_sem\"} min={1}\n                                         max={12} defaultValue={userInfo.sem}/>\n                        </div>\n                        <div className=\"ml-1\">\n                            <InputNumber placeholder={\"Группа\"} onChange={handleInputId} id={\"input_nmb_group\"} min={1}\n                                         max={5} defaultValue={userInfo.group}/>\n                        </div>\n                    </div>\n                    {!isNaN(userInfo.sem) && !isNaN(userInfo.group) ?\n                        <div className=\"IU\">{`Группа: ИУ10-${userInfo.sem}${userInfo.group}`}</div> : null}\n                </div>\n            )\n        } else if (userInfo.role === USER_TYPE_PROFESSOR) {\n            return (\n                <div>\n                    <div className=\"users-control_label\">Дисциплина</div>\n                    <Tags tags={userInfo.disciplines}\n                          selectList={disciplines.map(d => (d.discipline_content))}\n                          changeTags={(newTags) => {\n                              const oldInfo = {...userInfo};\n                              oldInfo.disciplines = newTags;\n                              setUserInfo(oldInfo);\n                          }\n                          }/>\n                    {(userValid.about.noFocus && userValid.about.msg) &&\n                    <AuthError msg={userValid.about.msg}/>}\n                    <div className=\"prof-info mt-2\">\n                        <div className=\"users-control_label\">Общая информация</div>\n                        <input id=\"input-about\" className=\"users-control_input\"\n                               onChange={handleUserInfo} onBlur={handleBlur}/>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    return (\n        <div>\n            <StatusLabel info={label}/>\n            <div className=\"users\">\n                <div className=\"users-control\">\n                    <div className=\"panel__header\">\n                        Добавление пользователей\n                    </div>\n                    <div className=\"users-control_block\">\n                        <div className=\"mt-1\">\n                            {(userValid.surname.noFocus && userValid.surname.msg) &&\n                            <AuthError msg={userValid.surname.msg}/>}\n                            <div className=\"users-control_label\">Фамилия</div>\n                            <input id=\"input-surname\" className=\"users-control_input\" value={userInfo.surname}\n                                   onChange={handleUserInfo} onBlur={handleBlur}/>\n                        </div>\n                        <div className=\"mt-1\">\n                            {(userValid.name.noFocus && userValid.name.msg) &&\n                            <AuthError msg={userValid.name.msg}/>}\n                            <div className=\"users-control_label\">Имя</div>\n                            <input id=\"input-name\" className=\"users-control_input\" value={userInfo.name}\n                                   onChange={handleUserInfo} onBlur={handleBlur}/>\n                        </div>\n                        <div className=\"mt-1\">\n                            {(userValid.patronymic.noFocus && userValid.patronymic.msg) &&\n                            <AuthError msg={userValid.patronymic.msg}/>}\n                            <div className=\"users-control_label\">Отчество</div>\n                            <input id=\"input-patronymic\" className=\"users-control_input\" value={userInfo.patronymic}\n                                   onChange={handleUserInfo} onBlur={handleBlur}/>\n                        </div>\n                        <div className=\"mt-1\">\n                            {(userValid.phone.noFocus && userValid.phone.msg) &&\n                            <AuthError msg={userValid.phone.msg}/>}\n                            <div className=\"users-control_label\">Телефон</div>\n                            <small className=\"users-control_advice\">Формат: 8 (888) 888-88-88</small>\n                            <input id=\"input-phone\" className=\"users-control_input\" value={userInfo.phone}\n                                   onChange={handleUserInfo} onBlur={handleBlur}/>\n                        </div>\n                        <div className=\"mt-1\">\n                            {(userValid.email.noFocus && userValid.email.msg) &&\n                            <AuthError msg={userValid.email.msg}/>}\n                            <div className=\"users-control_label\">Email</div>\n                            <input id=\"input-email\" className=\"users-control_input\" value={userInfo.email}\n                                   onChange={handleUserInfo} onBlur={handleBlur}/>\n                        </div>\n                        <div className=\"mt-1\">\n                            <div className=\"users-control_label\">Пароль</div>\n                            <small className=\"users-control_advice\">Не заполняется, если нет необходимости обновлять\n                                пароль существующего пользователя.</small>\n                            <div className=\"d-flex flex-row align-items-center\">\n                                <input id=\"input-password\" className=\"users-control_input\"\n                                       value={userInfo.password} onChange={handleUserInfo}\n                                       disabled={true} onBlur={handleBlur}/>\n                                <button type=\"button\" onClick={handlePassword}\n                                        className=\"tag-btn ml-1\"><FontAwesomeIcon className=\"icon-reload\"\n                                                                                  icon={faRedoAlt}\n                                                                                  size={\"sm\"}\n                                                                                  color={\"#ffffff\"}/></button>\n                            </div>\n                        </div>\n\n                        <div className=\"mt-3 mb-2\">\n                            <div className=\"users-control_label\">Тип пользователя</div>\n                            <select id=\"select-usertype\" className=\"users-control_select\" value={userInfo.role}\n                                    onChange={handleUserInfo} onBlur={handleBlur}>\n                                <option value={USER_TYPE_STUDENT}>Студент</option>\n                                <option value={USER_TYPE_PROFESSOR}>Преподаватель</option>\n                                <option value={USER_TYPE_METHODIST}>Методист</option>\n                            </select>\n                        </div>\n                        {defineRole()}\n\n                        <button type=\"button\" className=\"btn users-control_load mt-3 mb-3\"\n                                onClick={handleSubmit}>{btnText}\n                        </button>\n                    </div>\n                </div>\n                <UsersTable id={1} url={Urls.user.getProfessorsAll()} userType={USER_TYPE_PROFESSOR}\n                            title={\"Список преподавателей\"} rowClickEvent={handleUserEdit}/>\n                <UsersTable id={2} url={Urls.user.getStudentsAll()} userType={USER_TYPE_STUDENT}\n                            title={\"Список студентов\"} rowClickEvent={handleUserEdit}/>\n            </div>\n        </div>\n    )\n}\n\nexport default UsersControl;"]},"metadata":{},"sourceType":"module"}