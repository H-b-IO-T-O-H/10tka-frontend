{"ast":null,"code":"var _jsxFileName = \"/home/vlad/10tka/10tka-frontend/src/components/Tags/Tags.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./Tags.scss\";\nimport IconPlus from \"@components/IconPlus\";\nimport StatusLabel from \"@components/StatusLabel\";\nimport AuthError from \"@components/AuthError/AuthError\";\nimport AutoInput from \"@components/AutoCompleteInput\";\nimport { isTagValid } from \"@components/Tags/config\";\nimport { v4 as uuid } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Tags = ({\n  tags,\n  changeTags,\n  placeholder,\n  selectList\n}) => {\n  _s();\n\n  const [tagInput, setTagInp] = React.useState({\n    content: \"\",\n    noFocus: true,\n    errMsg: \"\"\n  });\n  const [label, showLabel] = useState({\n    content: \"\",\n    success: false\n  });\n  const handleInput = React.useCallback(e => {\n    const tagInfo = { ...tagInput\n    };\n    tagInfo.content = e.target.value;\n    tagInfo.errMsg = isTagValid(tags, tagInfo);\n    tagInfo.noFocus = false;\n    setTagInp(tagInfo);\n  }, [tagInput, tags]);\n  const handleBlur = React.useCallback(() => {\n    const tagInfo = { ...tagInput\n    };\n\n    if (tags.length > 0 && tagInfo.content === \"\") {\n      tagInfo.errMsg = \"\";\n    }\n\n    tagInfo.noFocus = true;\n    setTagInp(tagInfo);\n  }, [tagInput, tags]);\n  const handleDelete = React.useCallback(id => {\n    const tagsOld = [...tags];\n    const tagId = tagsOld.findIndex(obj => obj.id === id);\n    tagsOld.splice(tagId, 1);\n    changeTags(tagsOld);\n  }, [changeTags, tags]);\n  const addTag = React.useCallback(() => {\n    const tagsOld = [...tags];\n    const tagOld = { ...tagInput\n    };\n    const id = `tag-${uuid()}`;\n\n    if (tagInput.content === '') {\n      showLabel({\n        content: 'Введите дисциплину!',\n        success: false\n      });\n      return;\n    }\n\n    if (tagInput.errMsg !== \"\") {\n      return;\n    }\n\n    tagsOld.push({\n      id: id,\n      content: tagInput.content\n    });\n    changeTags(tagsOld);\n    tagOld.content = \"\";\n    setTagInp(tagOld);\n  }, [tags, tagInput, changeTags]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(StatusLabel, {\n      info: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2\",\n      children: tags.map(tag => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tag-block\",\n          children: tag.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-delete\",\n          onClick: () => handleDelete(tag.id),\n          children: /*#__PURE__*/_jsxDEV(IconPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 89\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, tag.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), tagInput.noFocus && tagInput.errMsg && /*#__PURE__*/_jsxDEV(AuthError, {\n      msg: tagInput.errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-row align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(AutoInput, {\n        id: \"input-auto_tag\",\n        className: \"users-control_input\",\n        list: selectList,\n        inputProps: {\n          value: tagInput.content,\n          onChange: handleInput,\n          onBlur: handleBlur,\n          placeholder: placeholder\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: addTag,\n        className: \"tag-btn ml-1\",\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Tags, \"DcmO6p/a8OYcFxzgJJaDNd4hpHA=\");\n\n_c = Tags;\nexport default Tags;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tags\");","map":{"version":3,"sources":["/home/vlad/10tka/10tka-frontend/src/components/Tags/Tags.tsx"],"names":["React","useState","IconPlus","StatusLabel","AuthError","AutoInput","isTagValid","v4","uuid","Tags","tags","changeTags","placeholder","selectList","tagInput","setTagInp","content","noFocus","errMsg","label","showLabel","success","handleInput","useCallback","e","tagInfo","target","value","handleBlur","length","handleDelete","id","tagsOld","tagId","findIndex","obj","splice","addTag","tagOld","push","map","tag","onChange","onBlur"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport \"./Tags.scss\"\nimport IconPlus from \"@components/IconPlus\";\nimport StatusLabel from \"@components/StatusLabel\";\nimport AuthError from \"@components/AuthError/AuthError\";\nimport AutoInput from \"@components/AutoCompleteInput\";\nimport {isTagValid} from \"@components/Tags/config\";\nimport {v4 as uuid} from \"uuid\";\n\ntype Props = {\n    placeholder?: string;\n    tags: Array<{ id: string, content: string }>;\n    selectList: Array<string>;\n    changeTags: (tagsOld: Array<{ id: string, content: string }>) => void;\n}\n\nconst Tags: React.FC<Props> = ({tags, changeTags, placeholder, selectList}) => {\n    const [tagInput, setTagInp] = React.useState({content: \"\", noFocus: true, errMsg: \"\"})\n    const [label, showLabel] = useState({content: \"\", success: false});\n\n    const handleInput = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        const tagInfo = {...tagInput};\n        tagInfo.content = e.target.value;\n        tagInfo.errMsg = isTagValid(tags, tagInfo);\n        tagInfo.noFocus = false;\n        setTagInp(tagInfo);\n    }, [tagInput, tags]);\n\n    const handleBlur = React.useCallback(() => {\n        const tagInfo = {...tagInput};\n\n        if (tags.length > 0 && tagInfo.content === \"\") {\n            tagInfo.errMsg = \"\";\n        }\n        tagInfo.noFocus = true;\n        setTagInp(tagInfo);\n    }, [tagInput, tags]);\n\n    const handleDelete = React.useCallback((id: string | number) => {\n        const tagsOld = [...tags];\n        const tagId = tagsOld.findIndex((obj) => (obj.id === id))\n        tagsOld.splice(tagId, 1);\n        changeTags(tagsOld);\n    }, [changeTags, tags]);\n\n\n    const addTag = React.useCallback(() => {\n        const tagsOld = [...tags];\n        const tagOld = {...tagInput};\n        const id = `tag-${uuid()}`;\n\n        if (tagInput.content === '') {\n            showLabel({content: 'Введите дисциплину!', success: false})\n            return;\n        }\n        if (tagInput.errMsg !== \"\") {\n            return;\n        }\n        tagsOld.push({id: id, content: tagInput.content})\n        changeTags(tagsOld)\n        tagOld.content = \"\";\n        setTagInp(tagOld);\n    }, [tags, tagInput, changeTags])\n\n    return (\n        <div>\n            <StatusLabel info={label}/>\n            <div className=\"mb-2\">{tags.map((tag) => (\n                <div className=\"tag\" key={tag.id}>\n                    <div className=\"tag-block\">\n                        {tag.content}\n                    </div>\n                    <button className=\"btn-delete\" onClick={() => handleDelete(tag.id)}><IconPlus/></button>\n                </div>\n            ))}</div>\n            {(tagInput.noFocus && tagInput.errMsg) &&\n            <AuthError msg={tagInput.errMsg}/>}\n            <div className=\"d-flex flex-row align-items-center\">\n                <AutoInput id=\"input-auto_tag\" className=\"users-control_input\"\n                           list={selectList}\n                           inputProps={{\n                               value: tagInput.content,\n                               onChange: handleInput,\n                               onBlur: handleBlur,\n                               placeholder: placeholder\n                           }}\n                />\n                <button type=\"button\" onClick={addTag} className=\"tag-btn ml-1\">+</button>\n            </div>\n        </div>\n    )\n}\n\nexport default Tags;"]},"metadata":{},"sourceType":"module"}