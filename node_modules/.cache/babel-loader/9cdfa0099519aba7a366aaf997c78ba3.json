{"ast":null,"code":"var _jsxFileName = \"/home/vlad/10tka/10tka-frontend/src/components/Timer/Timer.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { PROTECTED_SESSION_TIME } from \"../../pages/Authorization/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst secondsToTime = s => {\n  const h = Math.trunc(s / 3600);\n  const m = Math.trunc(s / 60 - 60 * h);\n  s = s - 3600 * h - 60 * m;\n  return {\n    h: h,\n    m: m,\n    s: s\n  };\n};\n\nconst Timer = ({\n  id,\n  onZero,\n  size\n}) => {\n  _s();\n\n  const [time, changeTime] = useState({\n    time: secondsToTime(PROTECTED_SESSION_TIME),\n    seconds: PROTECTED_SESSION_TIME\n  });\n  const [isActive, setActive] = useState(true);\n  const OnStopCallback = useCallback(() => {\n    if (onZero) {\n      onZero();\n    }\n  }, [onZero]);\n\n  const getSize = () => {\n    if (size.xs) {\n      return \"0.7rem\";\n    }\n\n    return size.lg ? \"1.2rem\" : \"0.9rem\";\n  };\n\n  useEffect(() => {\n    let timer = 0;\n\n    if (isActive) {\n      timer = window.setInterval(() => {\n        let seconds = time.seconds - 1;\n        changeTime({\n          time: secondsToTime(seconds),\n          seconds: seconds\n        });\n\n        if (seconds === 0 && isActive) {\n          setActive(!isActive);\n          OnStopCallback();\n        }\n      }, 1000);\n    } else if (!isActive && time.seconds !== 0) {\n      window.clearInterval(timer);\n    }\n\n    return () => window.clearInterval(timer);\n  }, [isActive, time.seconds, OnStopCallback]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: getSize()\n      },\n      children: [time.time.h, \":\", time.time.m, \":\", time.time.s]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)\n  }, id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Timer, \"X2inQcaehvNZY3TcH4Ie/huyPeo=\");\n\n_c = Timer;\nexport default Timer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"sources":["/home/vlad/10tka/10tka-frontend/src/components/Timer/Timer.tsx"],"names":["React","useEffect","useState","useCallback","PROTECTED_SESSION_TIME","secondsToTime","s","h","Math","trunc","m","Timer","id","onZero","size","time","changeTime","seconds","isActive","setActive","OnStopCallback","getSize","xs","lg","timer","window","setInterval","clearInterval","fontSize"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,WAApC,QAAsD,OAAtD;AAEA,SAAQC,sBAAR,QAAqC,kCAArC;;;AAEA,MAAMC,aAAa,GAAIC,CAAD,IAAe;AACjC,QAAMC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,GAAG,IAAf,CAAV;AACA,QAAMI,CAAC,GAAGF,IAAI,CAACC,KAAL,CAAWH,CAAC,GAAG,EAAJ,GAAS,KAAKC,CAAzB,CAAV;AACAD,EAAAA,CAAC,GAAGA,CAAC,GAAG,OAAOC,CAAX,GAAe,KAAKG,CAAxB;AACA,SAAO;AACHH,IAAAA,CAAC,EAAEA,CADA;AAEHG,IAAAA,CAAC,EAAEA,CAFA;AAGHJ,IAAAA,CAAC,EAAEA;AAHA,GAAP;AAKH,CATD;;AAiBA,MAAMK,KAAsB,GAAG,CAAC;AAACC,EAAAA,EAAD;AAAKC,EAAAA,MAAL;AAAaC,EAAAA;AAAb,CAAD,KAAwB;AAAA;;AAEnD,QAAM,CAACC,IAAD,EAAOC,UAAP,IAAqBd,QAAQ,CAAC;AAACa,IAAAA,IAAI,EAAEV,aAAa,CAACD,sBAAD,CAApB;AAA8Ca,IAAAA,OAAO,EAAEb;AAAvD,GAAD,CAAnC;AACA,QAAM,CAACc,QAAD,EAAWC,SAAX,IAAwBjB,QAAQ,CAAC,IAAD,CAAtC;AAEA,QAAMkB,cAAc,GAAGjB,WAAW,CAC9B,MAAM;AACF,QAAIU,MAAJ,EAAY;AACRA,MAAAA,MAAM;AACT;AACJ,GAL6B,EAM9B,CAACA,MAAD,CAN8B,CAAlC;;AASA,QAAMQ,OAAO,GAAG,MAAM;AAClB,QAAIP,IAAI,CAACQ,EAAT,EAAa;AACT,aAAO,QAAP;AACH;;AACD,WAAOR,IAAI,CAACS,EAAL,GAAU,QAAV,GAAqB,QAA5B;AACH,GALD;;AAOAtB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIuB,KAAK,GAAG,CAAZ;;AACA,QAAIN,QAAJ,EAAc;AACVM,MAAAA,KAAK,GAAGC,MAAM,CAACC,WAAP,CAAmB,MAAM;AAC7B,YAAIT,OAAO,GAAGF,IAAI,CAACE,OAAL,GAAe,CAA7B;AACAD,QAAAA,UAAU,CAAC;AACPD,UAAAA,IAAI,EAAEV,aAAa,CAACY,OAAD,CADZ;AAEPA,UAAAA,OAAO,EAAEA;AAFF,SAAD,CAAV;;AAIA,YAAIA,OAAO,KAAK,CAAZ,IAAiBC,QAArB,EAA+B;AAC3BC,UAAAA,SAAS,CAAC,CAACD,QAAF,CAAT;AACAE,UAAAA,cAAc;AACjB;AACJ,OAVO,EAUL,IAVK,CAAR;AAWH,KAZD,MAYO,IAAI,CAACF,QAAD,IAAaH,IAAI,CAACE,OAAL,KAAiB,CAAlC,EAAqC;AACxCQ,MAAAA,MAAM,CAACE,aAAP,CAAqBH,KAArB;AACH;;AACD,WAAO,MAAMC,MAAM,CAACE,aAAP,CAAqBH,KAArB,CAAb;AACH,GAlBQ,EAkBN,CAACN,QAAD,EAAWH,IAAI,CAACE,OAAhB,EAAyBG,cAAzB,CAlBM,CAAT;AAoBA,sBACI;AAAc,IAAA,SAAS,EAAC,QAAxB;AAAA,2BACI;AAAK,MAAA,KAAK,EAAE;AAACQ,QAAAA,QAAQ,EAAEP,OAAO;AAAlB,OAAZ;AAAA,iBACKN,IAAI,CAACA,IAAL,CAAUR,CADf,OACmBQ,IAAI,CAACA,IAAL,CAAUL,CAD7B,OACiCK,IAAI,CAACA,IAAL,CAAUT,CAD3C;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,KAAUM,EAAV;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH,CAhDD;;GAAMD,K;;KAAAA,K;AAkDN,eAAeA,KAAf","sourcesContent":["import React, {useEffect, useState, useCallback} from \"react\";\n\nimport {PROTECTED_SESSION_TIME} from \"../../pages/Authorization/config\";\n\nconst secondsToTime = (s: number) => {\n    const h = Math.trunc(s / 3600);\n    const m = Math.trunc(s / 60 - 60 * h);\n    s = s - 3600 * h - 60 * m\n    return {\n        h: h,\n        m: m,\n        s: s\n    };\n}\n\ntype Props = {\n    id?: string,\n    onZero?: () => void,\n    size: { sm?: boolean, xs?: boolean, lg?: boolean }\n}\n\nconst Timer: React.FC<Props> = ({id, onZero, size}) => {\n\n    const [time, changeTime] = useState({time: secondsToTime(PROTECTED_SESSION_TIME), seconds: PROTECTED_SESSION_TIME});\n    const [isActive, setActive] = useState(true);\n\n    const OnStopCallback = useCallback(\n        () => {\n            if (onZero) {\n                onZero();\n            }\n        },\n        [onZero],\n    );\n\n    const getSize = () => {\n        if (size.xs) {\n            return \"0.7rem\";\n        }\n        return size.lg ? \"1.2rem\" : \"0.9rem\";\n    }\n\n    useEffect(() => {\n        let timer = 0;\n        if (isActive) {\n            timer = window.setInterval(() => {\n                let seconds = time.seconds - 1;\n                changeTime({\n                    time: secondsToTime(seconds),\n                    seconds: seconds,\n                });\n                if (seconds === 0 && isActive) {\n                    setActive(!isActive);\n                    OnStopCallback();\n                }\n            }, 1000);\n        } else if (!isActive && time.seconds !== 0) {\n            window.clearInterval(timer);\n        }\n        return () => window.clearInterval(timer);\n    }, [isActive, time.seconds, OnStopCallback]);\n\n    return (\n        <div key={id} className=\"d-flex\">\n            <div style={{fontSize: getSize()}}>\n                {time.time.h}:{time.time.m}:{time.time.s}\n            </div>\n        </div>\n    );\n}\n\nexport default Timer;\n\n"]},"metadata":{},"sourceType":"module"}